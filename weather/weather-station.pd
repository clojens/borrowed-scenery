#N canvas 722 110 531 554 10;
#X text 123 3 8 data bits \, 1 start bit \, 1 stop bit \, and no parity.
Default baud rate is 19200 User selectable between 1200 \, 2400 \,
4800 \, 9600 \, 14400 \, and 19200 baud.;
#X obj 163 209 comport 2 19200;
#X msg 204 94 devicename /dev/tty.SLAB_USBtoUART;
#X msg 219 123 bits 8;
#X msg 219 146 stopbit 1;
#X msg 219 169 parity 0;
#X obj 148 58 loadbang;
#X msg 75 118 13;
#X text 37 118 <CR>:;
#X msg 76 95 10;
#X text 37 92 <LF>:;
#N canvas 368 58 720 542 testing 0;
#X msg 200 50 84 69 83 84 10;
#X obj 71 203 s command;
#X msg 88 21 10;
#X msg 149 143 82 88 67 72 69 67 75 10;
#X msg 219 271 86 69 82 10;
#X msg 111 315 82 69 67 69 73 86 69 82 83 10;
#X msg 202 376 78 86 69 82 10;
#X text 304 45 "TEST" Sends the string “TESTn” back.;
#X text 304 141 "RXCHECK" Sends the Console Diagnostics report.;
#X text 304 176 "STRMON" Echos all of the data packets sent by sensor
transmitters. Page 6 of 52;
#X text 313 274 "VER" Sends the firmware date code as a text string
;
#X text 313 309 "RECEIVERS" Sends the bit map of station IDs that the
console can hear \, This is not the byte for indicating what the console
selects to listen from.;
#X text 313 370 "NVER" Sends the firmware version number as a text
string. This command is only supported by Vantage Pro2.;
#X text 304 80 "WRD"<0x12><0x4d> \, ACK Responds with a weather station
type that is backward compatible with earlier Davis weather products.
;
#X text 304 224 "STRMOFF" Stops sending sensor packets.;
#X connect 0 0 1 0;
#X connect 2 0 1 0;
#X connect 3 0 1 0;
#X connect 4 0 1 0;
#X connect 5 0 1 0;
#X connect 6 0 1 0;
#X restore 37 242 pd testing;
#X obj 78 147 r command;
#N canvas 701 97 489 431 print-serial 0;
#X obj 201 22 inlet;
#X obj 267 292 moocow/string2any;
#X msg 381 244 10;
#X msg 382 264 13;
#X obj 200 244 list append;
#X obj 283 244 print stored;
#X floatatom 262 96 5 0 0 0 - - -;
#X msg 263 172 215;
#X obj 263 119 prepend set;
#X obj 79 110 print got;
#X obj 199 70 route 10 13;
#X obj 376 173 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj 333 170 t l;
#X obj 263 204 list prepend;
#X obj 263 143 t b a;
#X obj 166 111 t b b b;
#X obj 267 356 print return:;
#X connect 0 0 9 0;
#X connect 0 0 10 0;
#X connect 1 0 16 0;
#X connect 2 0 1 1;
#X connect 3 0 1 1;
#X connect 4 0 1 0;
#X connect 6 0 8 0;
#X connect 7 0 13 0;
#X connect 8 0 14 0;
#X connect 10 0 15 0;
#X connect 10 2 6 0;
#X connect 11 0 13 1;
#X connect 12 0 13 1;
#X connect 13 0 4 1;
#X connect 13 0 5 0;
#X connect 13 0 12 0;
#X connect 14 0 7 0;
#X connect 14 1 7 0;
#X connect 15 0 4 1;
#X connect 15 1 13 1;
#X connect 15 2 4 0;
#X restore 200 317 pd print-serial;
#N canvas 614 240 541 401 current-data 0;
#X text 198 75 "LOOP <number of LOOP packets to send-decimal>" Sends
the specified number of LOOP packets \, 1 every 2 seconds. Console
sleeps between packets. "HILOWS" Sends all the current high/low data
in a single 436 byte data block \, plus 2 CRC bytes. "PUTRAIN <Yearly
Rain in rain clicks-decimal>" Set the Yearly rainfall amount on the
Vantage Console. "PUTET <Yearly ET in 100th inch-decimal" Set the Yearly
ET amount on the Vantage Console.;
#X obj 14 162 s command;
#X msg 57 129 72 73 76 79 87 83 10;
#X msg 16 40 10;
#X msg 53 40 13;
#X text 160 61 /;
#X text 166 51 /;
#X text 335 45 comment;
#X msg 64 83 76 79 79 80 32 49 10;
#X text 176 38 only send one packet (i.e. "LOOP 1");
#X connect 2 0 1 0;
#X connect 3 0 1 0;
#X connect 4 0 1 0;
#X connect 8 0 1 0;
#X restore 38 268 pd current-data;
#N canvas 0 22 450 300 download 0;
#X restore 44 304 pd download;
#N canvas 0 22 450 300 EEPROM 0;
#X restore 47 330 pd EEPROM;
#N canvas 705 128 522 412 credits 0;
#X text 92 61 VantageSerialProtocolDocs_v230.pdf;
#X text 93 91 Vantage Pro2 Serial Communication Reference Manual Rev
2.3 (02/09/2009) Davis Intruments Part Number: 7395.8;
#X text 93 23 2012 (GPL) nik gaffney <nik@fo.am>;
#X restore 359 326 pd credits;
#N canvas 63 28 848 450 parse-LOOP 1;
#X obj 185 -44 inlet;
#X obj 186 164 list append;
#X floatatom 248 16 5 0 0 0 - - -;
#X msg 249 92 214;
#X obj 249 39 prepend set;
#X obj 361 93 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144 -1
-1;
#X obj 319 90 t l;
#X obj 249 124 list prepend;
#X obj 249 63 t b a;
#X obj 152 31 t b b b;
#X obj 269 164 print LssP:;
#X obj 98 234 list length;
#X floatatom 98 261 5 0 0 0 - - -;
#X obj 379 -24 s command;
#X msg 379 -70 10;
#X msg 379 -49 76 79 79 80 32 49 10;
#X text 321 -71 wake up!;
#X text 322 -49 "LOOP 1";
#X obj 249 -10 print got:;
#X text 428 30 Each data packet is 99 bytes long and contains most
of the current data values shown on the vantage console.;
#X obj 433 141 list length;
#X floatatom 433 168 5 0 0 0 - - -;
#X obj 411 229 bytes2any;
#X obj 411 258 print p0;
#X obj 411 203 packel 1;
#X obj 101 -10 == 99;
#X msg 433 67 list 6 76 79 79 236 58 148 115 35 3 41 23 3 106 255 255
255 255 255 255 255 255 255 255 255 255 255 255 255 43 255 255 255
255 255 255 255 255 255 255 25 2 2 255 255 255 255 255 255 255 106
3 163 132 2 233 7 10 13 149 214;
#X text 427 7 reply to "LOOP" starts with 0x06 <ACK>;
#X obj 108 87 print ACK;
#X obj 205 214 s loopl;
#X obj 491 179 s loopl;
#X connect 0 0 18 0;
#X connect 0 0 2 0;
#X connect 1 0 11 0;
#X connect 1 0 29 0;
#X connect 2 0 4 0;
#X connect 3 0 7 0;
#X connect 4 0 8 0;
#X connect 5 0 7 1;
#X connect 6 0 7 1;
#X connect 7 0 1 1;
#X connect 7 0 6 0;
#X connect 7 0 10 0;
#X connect 8 0 3 0;
#X connect 8 1 3 0;
#X connect 9 0 1 1;
#X connect 9 1 7 1;
#X connect 9 2 28 0;
#X connect 11 0 12 0;
#X connect 11 0 25 0;
#X connect 14 0 13 0;
#X connect 15 0 13 0;
#X connect 20 0 21 0;
#X connect 22 0 23 0;
#X connect 24 0 22 0;
#X connect 25 0 9 0;
#X connect 26 0 20 0;
#X connect 26 0 30 0;
#X coords 0 450 1 449 460 60 0;
#X restore 228 289 pd parse-LOOP;
#X obj 163 235 select 0;
#X obj 143 238 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 0
1;
#N canvas 252 23 925 612 parse 0;
#X floatatom 70 191 5 0 0 0 - - -;
#X floatatom 109 191 5 0 0 0 - - -;
#X floatatom 71 249 5 0 0 0 - - -;
#X floatatom 112 248 5 0 0 0 - - -;
#X obj 146 224 / 10;
#X floatatom 65 313 5 0 0 0 - - -;
#X floatatom 106 312 5 0 0 0 - - -;
#X obj 144 288 / 10;
#X floatatom 496 359 5 0 0 0 - - -;
#X floatatom 537 358 5 0 0 0 - - -;
#X obj 575 334 / 10;
#X obj 67 224 offset 9 10;
#X obj 504 162 offset 11;
#X obj 70 165 offset 7 8;
#X obj 65 288 offset 12 13;
#X obj 539 275 offset 14;
#X obj 496 334 offset 16 17;
#X obj 524 219 offset 33;
#X obj 18 166 r loopl;
#X obj 259 162 print barometeric-pressure;
#X obj 302 224 print inside-temperature;
#X obj 299 288 print outside-temperature;
#X obj 716 273 print wind-speed;
#X obj 735 334 print wind-direction;
#X obj 699 218 print outside-humidity;
#X obj 681 159 print inside-humidity;
#X obj 203 163 r vp2-bp;
#X obj 245 224 r vp2-it;
#X obj 243 288 r vp2-ot;
#X obj 143 163 s vp2-bp;
#X obj 185 224 s vp2-it;
#X obj 183 288 s vp2-ot;
#X obj 568 160 s vp2-ih;
#X obj 603 273 s vp2-ws;
#X obj 588 217 s vp2-oh;
#X obj 614 334 s vp2-wd;
#X obj 677 333 r vp2-wd;
#X obj 643 216 r vp2-oh;
#X obj 658 272 r vp2-ws;
#X obj 623 159 r vp2-ih;
#X floatatom 64 377 5 0 0 0 - - -;
#X floatatom 105 376 5 0 0 0 - - -;
#X obj 67 353 offset 41 42;
#X obj 153 353 s vp2-rr;
#X obj 210 354 r vp2-rr;
#X obj 267 354 print rain-rate;
#X floatatom 66 431 5 0 0 0 - - -;
#X floatatom 107 430 5 0 0 0 - - -;
#X obj 66 407 offset 44 45;
#X obj 155 407 s vp2-sr;
#X obj 284 410 print solar-radiation;
#X obj 228 409 r vp2-sr;
#X floatatom 72 490 5 0 0 0 - - -;
#X floatatom 113 489 5 0 0 0 - - -;
#X obj 161 466 s vp2-tsr;
#X obj 234 468 r vp2-tsr;
#X floatatom 71 538 5 0 0 0 - - -;
#X floatatom 112 537 5 0 0 0 - - -;
#X obj 233 516 r vp2-tsr;
#X obj 160 513 s vp2-tst;
#X obj 297 467 print time-of-sunrise;
#X obj 295 517 print time-of-sunset;
#X obj 72 466 offset 91 92;
#X obj 71 514 offset 93 94;
#X obj 18 224 r loopl;
#X obj 15 289 r loopl;
#X obj 13 354 r loopl;
#X obj 14 407 r loopl;
#X obj 19 465 r loopl;
#X obj 19 514 r loopl;
#X obj 455 162 r loopl;
#X obj 477 220 r loopl;
#X obj 489 276 r loopl;
#X obj 444 336 r loopl;
#X floatatom 105 104 5 0 0 0 - - -;
#X floatatom 105 123 5 0 0 0 - - -;
#X floatatom 105 142 5 0 0 0 - - -;
#X text 142 105 < barometeric pressure;
#X floatatom 284 104 5 0 0 0 - - -;
#X floatatom 284 123 5 0 0 0 - - -;
#X floatatom 284 142 5 0 0 0 - - -;
#X floatatom 448 119 5 0 0 0 - - -;
#X floatatom 448 138 5 0 0 0 - - -;
#X text 143 123 < outside temperature;
#X text 145 141 < outside humidity;
#X text 321 103 < solar radiation;
#X obj 282 558 s vp2-dl;
#X obj 255 559 -;
#X obj 343 557 r vp2-dl;
#X obj 401 559 print length-of-day;
#X text 323 121 < length of day;
#X text 324 140 < rain rate;
#X text 487 120 < direction;
#X text 487 136 < speed;
#X text 449 100 wind;
#X connect 4 0 30 0;
#X connect 7 0 31 0;
#X connect 10 0 35 0;
#X connect 11 0 2 0;
#X connect 11 1 3 0;
#X connect 11 2 4 0;
#X connect 12 0 32 0;
#X connect 13 0 0 0;
#X connect 13 1 1 0;
#X connect 13 2 29 0;
#X connect 14 0 5 0;
#X connect 14 1 6 0;
#X connect 14 2 7 0;
#X connect 15 0 33 0;
#X connect 16 0 8 0;
#X connect 16 1 9 0;
#X connect 16 2 10 0;
#X connect 17 0 34 0;
#X connect 18 0 13 0;
#X connect 26 0 19 0;
#X connect 26 0 74 0;
#X connect 27 0 20 0;
#X connect 28 0 21 0;
#X connect 28 0 75 0;
#X connect 36 0 23 0;
#X connect 36 0 81 0;
#X connect 37 0 24 0;
#X connect 37 0 76 0;
#X connect 38 0 22 0;
#X connect 38 0 82 0;
#X connect 39 0 25 0;
#X connect 42 0 40 0;
#X connect 42 1 41 0;
#X connect 42 2 43 0;
#X connect 44 0 45 0;
#X connect 44 0 80 0;
#X connect 48 0 46 0;
#X connect 48 1 47 0;
#X connect 48 2 49 0;
#X connect 51 0 50 0;
#X connect 51 0 78 0;
#X connect 55 0 60 0;
#X connect 55 0 87 0;
#X connect 58 0 61 0;
#X connect 58 0 87 1;
#X connect 62 0 52 0;
#X connect 62 1 53 0;
#X connect 62 2 54 0;
#X connect 63 0 56 0;
#X connect 63 1 57 0;
#X connect 63 2 59 0;
#X connect 64 0 11 0;
#X connect 65 0 14 0;
#X connect 66 0 42 0;
#X connect 67 0 48 0;
#X connect 68 0 62 0;
#X connect 69 0 63 0;
#X connect 70 0 12 0;
#X connect 71 0 17 0;
#X connect 72 0 15 0;
#X connect 73 0 16 0;
#X connect 87 0 86 0;
#X connect 88 0 89 0;
#X connect 88 0 79 0;
#X coords 0 -1 1 1 460 60 2 100 100;
#X restore 36 370 pd parse;
#X connect 1 0 19 0;
#X connect 2 0 1 0;
#X connect 3 0 1 0;
#X connect 4 0 1 0;
#X connect 5 0 1 0;
#X connect 6 0 3 0;
#X connect 6 0 4 0;
#X connect 6 0 5 0;
#X connect 6 0 2 0;
#X connect 7 0 1 0;
#X connect 9 0 1 0;
#X connect 12 0 1 0;
#X connect 19 0 13 0;
#X connect 19 1 18 0;
#X connect 20 0 19 0;
